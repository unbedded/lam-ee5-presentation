# Braille Display Device - Requirements Database (REFACTORED)
# Project: Lam Research EE Concept Evaluation
# Purpose: SINGLE SOURCE OF TRUTH for all requirements and assumptions
# Auto-generates: requirements.md (human report) + traceability-matrix.md
#
# HIERARCHICAL NAMING CONVENTION:
#   PRD-XXXX-NNN         = Product Requirement (verbatim from PDF)
#   PRD-XXXX-NNN-ASMP    = Assumption (our interpretation to make PRD actionable)
#   NO DEEPER NESTING    = Design decisions go in v1.3.0 architecture docs, NOT here
#
# Categories:
#   PRD-SCHED = Schedule/Timeline requirements
#   PRD-COST  = Cost requirements
#   PRD-VOL   = Volume/manufacturing requirements
#   PRD-SIZE  = Size/portability requirements
#   PRD-USER  = User/accessibility requirements
#   PRD-FUNC  = Functional requirements
#   PRD-IFACE = Interface/connectivity requirements
#   PRD-MECH  = Mechanical design requirements (derived from ADA 703.3)
#   PRD-POWER = Power/battery requirements
#   NFR-STD   = Non-functional standards/compliance requirements
#   NFR-EMI   = EMI/EMC requirements

metadata:
  project: "Lam Research - Braille Display EE Concept Evaluation"
  version: "2.3.0"
  date: "2025-10-12"
  author: "Spencer Barrett"
  source_doc: "reference/interview/Interview Overview and Concept Evaluation - EE Presentation.pdf"
  source_email: "reference/interview/interview-confirmation-email.md"
  changelog: "v2.3.0: Removed PRD-FUNC-003-ARCH-C-EXCEPT (architectural design decision, not requirement) - moved to architecture docs"

  scope:
    in_scope:
      - "Technical requirements identification (system, electrical, manufacturing, user)"
      - "Alternative solution architectures (actuator, control, communication)"
      - "Quantitative trade-off analysis (cost, power, size, timeline)"
      - "Path to production (2-month timeline to pilot production)"
      - "Design for manufacturability (DFM) - high volume SMT assembly"
      - "Standards awareness (FCC/CE, UL, ADA/ISO)"
      - "Prototype-to-pilot feasibility (10-100 units)"

    out_of_scope:
      # ⚠️ DEFERRED to post-pilot phases (Month 3+), NOT ignored
      - "Regulatory compliance certification (FCC/CE/UL testing) → Post-pilot"
      - "Formal FMEA/DFMEA with RPN scoring → Post-pilot, v1.5.0 does lightweight risk analysis"
      - "Market-specific localization → Post-pilot"
      - "Service infrastructure (warranty, RMA, spare parts) → Post-pilot"
      - "End-of-life management (recycling) → Post-pilot"
      - "Intellectual property strategy (patents, FTO) → Post-pilot when design frozen"
      - "Supply chain contracts (vendor negotiations) → Post-pilot"
      - "Quality management system (ISO 9001) → Post-pilot"
      - "Field trials at scale (50-100 beta users) → Post-pilot"
      - "Environmental sealing / IP rating → Post-pilot if market requires"
      - "Detailed DFX (DFT, DFA, DFS) → Post-pilot, v1.5.0 covers basic DFM"
      - "Software application development (cell phone app) → Out of scope, use existing screen readers"

  rationale: |
    This is a concept evaluation focused on electrical engineering design and production
    feasibility within a 2-month timeline to PILOT PRODUCTION (10-100 units for design
    validation), NOT immediate mass production. Pilot validates design, manufacturing
    tolerances, and failure modes before scaling to high volume (Month 3+).

    PDF intentionally left many requirements vague to test engineering judgment.
    Professional approach: Document assumptions (PRD-XXX-NNN-ASMP), test sensitivity
    in v1.4.0, present portfolio of design options in v1.3.0.

# ============================================================================
# GROUND TRUTH REQUIREMENTS (verbatim from PDF)
# ============================================================================
# These are directly quoted from PDF. Status = CLEAR (testable) or VAGUE (needs assumption)

requirements:

  # --------------------------------------------------------------------------
  # SCHEDULE / TIMELINE
  # --------------------------------------------------------------------------

  PRD-SCHED-001:
    title: "Production Timeline - Two Month Release"
    source: "PDF p.2 - Context"
    pdf_verbatim: "The program director aims to release the project into production within two months to meet a customer deadline."
    status: "VAGUE - 'production' undefined (pilot vs mass?)"
    why_vague: "Does 'production' mean pilot (100-500 units) or mass production (10k+/month)? Industry context suggests pilot, but not explicit."
    testable: NO
    priority: "P0-Critical"
    category: "Schedule"

  PRD-SCHED-001-ASMP:
    parent: "PRD-SCHED-001"
    title: "Pilot Production Assumption"
    pdf_says: "release the project into production within two months"
    our_assumption: "Production within 2 months = PILOT production of 100-500 units for design validation, NOT mass production (10k+/month)"
    rationale: |
      Industry best practice: 2-month design cycle → pilot run (100-500 units) → validate design,
      manufacturing tolerances, failure modes → scale to mass production (Month 3+).
      Direct-to-mass-production is extremely high-risk (no tolerance validation, no FMEA data).
    risk_level: MEDIUM
    customer_validation_needed: YES
    impact_if_wrong: "If mass production required in 2 months, timeline is infeasible (tooling, certification, supply chain all take 8-12 weeks minimum)"
    test_plan: "v1.5.0 production timeline (design → pilot → scale), v1.4.0 sensitivity on timeline compression"
    priority: "P0-Critical"
    category: "Schedule"
    acceptance_criteria:
      - "Pilot run: 100-500 units for design validation"
      - "Parts lead time: <6 weeks (use COTS components, no custom tooling)"
      - "Assembly method: Hand assembly or semi-automated (pilot scale)"
      - "Validation: Pilot units test mechanical tolerances, failure modes, user acceptance"
      - "Post-pilot: Scale to mass production (10k+/month) after validation"

  PRD-SCHED-002-ASMP:
    parent: "PRD-SCHED-001-ASMP"
    title: "COTS Component Mandate (2-Month Timeline)"
    pdf_says: "release the project into production within two months"
    our_assumption: "2-month timeline requires ALL components be COTS (commercial off-the-shelf) with ≤4 week lead time, NO custom parts"
    rationale: |
      Timeline breakdown (8 weeks total):
      - Week 1-2: Requirements & Architecture (complete)
      - Week 3-4: Detailed Design (schematic, PCB layout, enclosure CAD)
      - Week 5-6: Procurement & Fabrication (COTS parts arrive, PCB fab 3 weeks)
      - Week 7: Assembly & Test (pilot units)
      - Week 8: Pilot Production (100 units for validation)

      Custom piezo actuators: 8-12 week lead time (vendor quote, tooling, samples) → VIOLATES timeline
      COTS components: ≤4 week lead time (Digikey/Mouser stock) → FITS timeline

      CRITICAL FINDING: NO COTS piezo available at 2-3mm diameter with 0.5mm stroke.
      Smallest COTS piezo: 5mm diameter (Piezo Systems T216, insufficient stroke).
      COTS solenoids available: 4mm diameter (Takaha BS-0420N-01, 2-week lead time, $0.60 ea).

      Implication: Must use solenoid (4mm) OR relax size constraint OR abandon 2-month timeline.
    requirement: "All components must be COTS with ≤4 week lead time (Digikey/Mouser stock or equivalent)"
    risk_level: CRITICAL
    customer_validation_needed: YES
    impact_if_wrong: "Custom piezo requires 8-12 weeks → misses 2-month deadline by 6-10 weeks. Pilot production delayed to Month 3-4."
    test_plan: "docs/cots-timeline-analysis.md shows custom piezo = 8-12 weeks (FAIL), COTS solenoid = 2 weeks (PASS)"
    priority: "P0-Critical"
    category: "Schedule"
    acceptance_criteria:
      - "Lead time: ≤4 weeks for ALL components (actuators, MCU, power, connectors)"
      - "Stock availability: Digikey/Mouser or equivalent distributor in-stock"
      - "NO custom tooling: No injection molds, custom piezo, or proprietary parts"
      - "Exceptions: PCB fabrication (3 weeks OK), enclosure 3D print (1 week OK)"
    verification_method: "Analysis (BOM review with lead times), Procurement (confirm stock availability before design freeze)"
    derived_from: "8-week timeline constraint (PRD-SCHED-001-ASMP)"
    traces_to: "Actuator selection (solenoid vs piezo), BOM, docs/cots-timeline-analysis.md"

  # --------------------------------------------------------------------------
  # SIZE / PORTABILITY
  # --------------------------------------------------------------------------

  PRD-SIZE-001:
    title: "Portable Device"
    source: "PDF p.2 - Objective"
    pdf_verbatim: "portable, low cost, high volume companion device to a cell phone"
    status: "VAGUE - no size/weight/portability definition"
    why_vague: "No dimensions, weight limits, or context (pocket? bag? hand-carry? desktop?)"
    testable: NO
    priority: "P1-High"
    category: "Form Factor"

  PRD-SIZE-001-ASMP:
    parent: "PRD-SIZE-001"
    title: "Portable Form Factor - Cell Phone Environment Compatible"
    pdf_says: "portable companion device to a cell phone"
    our_assumption: "Portable = compatible with environments where cell phone goes (pocket, bag, desk). Target ≤1.3 lbs (590g) weight, fits in bag/purse, operates anywhere cell phone operates."
    rationale: |
      'Companion device to cell phone' suggests same portability/environment as cell phone:
      - Pocket/bag portable (not desktop/tethered)
      - Indoor environments (home, office, school, cafe)
      - Battery powered (untethered)
      - Durable for daily transport

      BrailleMe competitor benchmark: 1.3 lbs (590g), 20-cell, portable design.
      Our 32-cell device will be slightly larger/heavier, but target ≤1.3 lbs is achievable.

      SIZE VARIANCE BY ARCHITECTURE:
      - ARCH_SOL_ECO: 280mm × 100mm × 15mm (8.75mm cell spacing, 4mm COTS solenoid, 3.5mm dot pitch)
        → Trade-off documented in v1.3.0 architecture docs: timeline compliance (2-week COTS) vs device size
      - ARCH_PIEZO_ECO: 198mm × 100mm × 15mm (6.2mm cell spacing, piezo actuators, 2.5mm pitch)
      - ARCH_PIEZO_DLX: 198mm × 100mm × 15mm (6.2mm cell spacing, piezo actuators, 2.5mm pitch)
    risk_level: MEDIUM
    customer_validation_needed: YES
    sensitivity_range: "Weight: 0.5-1.5 lbs (230-680g), Length: 200-280mm (by architecture), Width: 100mm, Height: 15mm"
    impact_if_wrong: "If ultra-light (<0.5 lbs) required, limits battery capacity significantly. If desktop (2+ lbs) acceptable, eases design constraints."
    test_plan: "v1.3.0 weight budget (actuators + battery + enclosure), v1.4.0 sensitivity on size/weight trade-offs"
    priority: "P1-High"
    category: "Form Factor"
    acceptance_criteria:
      - "Weight: ≤1.3 lbs (590g) target (BrailleMe benchmark)"
      - "Dimensions (ARCH-A/B): 200mm × 100mm × 15mm (7.9\" × 3.9\" × 0.6\")"
      - "Dimensions (ARCH-C): 280mm × 100mm × 15mm (11\" × 3.9\" × 0.6\", larger due to 3.5mm pitch)"
      - "Operating environments: Same as cell phone (indoor, 0-40°C, 20-80% RH non-condensing)"
      - "Durability: Survives daily transport (bag/backpack, 1m drop test)"
      - "Power: Battery powered (untethered), USB-C charging"
    competitor_reference: "BrailleMe (1.3 lbs, 20-cell, portable design)"

  # --------------------------------------------------------------------------
  # INTERFACE / CONNECTIVITY
  # --------------------------------------------------------------------------

  PRD-IFACE-001:
    title: "Cell Phone Connectivity - Pairing and Connection"
    source: "PDF p.2 - Function"
    pdf_verbatim: "device connects to a cell phone"
    status: "VAGUE - connection method unspecified"
    why_vague: "No interface protocol specified (BLE? USB? WiFi? wired?), no pairing process specified"
    testable: NO
    priority: "P0-Critical"
    category: "Interface"

  PRD-IFACE-002:
    title: "Text Data Reception - Braille Output"
    source: "PDF p.2 - Function"
    pdf_verbatim: "receives text source from phone and displays as appropriate Braille text"
    status: "VAGUE - data format and encoding unspecified"
    why_vague: "No text encoding specified (ASCII? Unicode?), no braille translation method (Grade 1? Grade 2?), no data protocol"
    testable: NO
    priority: "P0-Critical"
    category: "Interface"

  PRD-IFACE-001-ASMP:
    parent: "PRD-IFACE-001"
    title: "Multi-Interface Connectivity Strategy (Physical Layer)"
    pdf_says: "device connects to a cell phone"
    our_assumption: "Primary: BLE wireless. Secondary: USB-C wired. Portfolio approach: 3 architectures."
    rationale: |
      PORTFOLIO APPROACH (v1.3.0 will design multiple architectures):
      - ARCH-A: BLE-only (wireless, battery required, most portable)
      - ARCH-B: USB-C wired (no battery, tethered, lowest cost $100-150 BOM savings)
      - ARCH-C: BLE + USB-C hybrid (best UX, highest cost $250-300 BOM)

      Connection requirements differ by architecture:
      - BLE: Requires pairing via iOS/Android Bluetooth settings
      - USB-C: Plug-and-play, no pairing required
    risk_level: HIGH
    customer_validation_needed: YES
    sensitivity_range: "BLE-only, USB-C-only, or BLE+USB hybrid"
    impact_if_wrong: "BLE-only eliminates low-cost wired option. USB-C-only eliminates wireless UX."
    test_plan: "v1.3.0 interface architecture comparison (BLE vs USB-C vs hybrid), v1.4.0 cost/UX trade-offs"
    priority: "P0-Critical"
    category: "Interface"
    acceptance_criteria:
      - "Physical interface options: BLE 5.0+ (wireless) OR USB-C (wired) OR both (hybrid)"
      - "Cross-platform: iOS + Android compatibility"
      - "Pairing time: <30 seconds (BLE)"
      - "Connection time: <2 seconds (USB-C plug-in)"
    alternative_scenarios:
      - "Scenario A (BLE-only): Wireless, requires battery, $200-250 BOM"
      - "Scenario B (USB-C wired): Tethered, no battery, $100-150 BOM"
      - "Scenario C (Hybrid): Best UX, highest cost $250-300 BOM"

  PRD-IFACE-002-ASMP:
    parent: "PRD-IFACE-002"
    title: "Text Format and Braille Translation"
    pdf_says: "receives text source and displays as Braille"
    our_assumption: "ASCII text input (8-bit), Grade 1 braille translation (direct character mapping), Unicode deferred to v2.0"
    rationale: |
      Grade 1 braille: Direct character-to-braille mapping (simpler firmware, faster development)
      - 26 letters + 10 digits + punctuation = ~50 characters
      - 1:1 mapping (no contractions)
      - ASCII covers English text (98% of pilot use cases)

      Grade 2 braille (contracted): Deferred to v2.0 (requires complex contraction rules)
      Unicode support: Deferred to v2.0 (adds complexity, lookup tables, multi-byte encoding)
    requirement: "Device shall accept ASCII text (8-bit encoding) and display as Grade 1 braille (uncontracted)"
    risk_level: MEDIUM
    customer_validation_needed: YES
    impact_if_wrong: "If Grade 2 contracted braille required, adds firmware complexity (2-3 weeks development)"
    test_plan: "v1.3.0 firmware design (ASCII→braille lookup table), v1.4.0 user testing with English text"
    priority: "P0-Critical"
    category: "Interface"
    acceptance_criteria:
      - "Text format: ASCII (8-bit encoding, 0x20-0x7E printable characters)"
      - "Braille translation: Grade 1 (uncontracted, direct character mapping)"
      - "Character set: 26 letters + 10 digits + ~20 punctuation/symbols"
      - "Translation table: 1:1 ASCII-to-braille mapping (ISO 11548-1)"
      - "Data integrity: CRC or checksum for error detection"
    verification_method: "Test (ASCII text transmission, braille output validation with blind users)"

  PRD-IFACE-003-ASMP:
    parent: "PRD-IFACE-001-ASMP"
    title: "USB-C HID Device Class (Driverless Operation)"
    pdf_says: "N/A (derived from USB-C wired architecture)"
    our_assumption: "USB-C wired device shall enumerate as HID class (Braille Display usage page 0x41) for driverless iOS/Android support"
    rationale: |
      iOS/Android require HID class for braille displays to work with built-in screen readers:
      - iOS VoiceOver: Supports HID braille displays natively (no custom driver allowed)
      - Android TalkBack: Supports HID braille displays (Android 4.1+)
      - HID class: Plug-and-play, no App Store apps required
      - USB HID v1.11 Braille Display Usage (Usage Page 0x41)

      Alternative (CDC/Custom): Would require custom driver or app (NOT allowed on iOS)
    requirement: "Device shall enumerate as USB HID class device with Braille Display usage page (0x41)"
    risk_level: HIGH
    customer_validation_needed: YES
    impact_if_wrong: "Non-HID device won't work with iOS VoiceOver (iOS rejects non-HID braille displays)"
    test_plan: "v1.3.0 firmware USB HID descriptor, Week 5-6 test with iOS VoiceOver + Android TalkBack"
    priority: "P0-Critical"
    category: "Interface"
    acceptance_criteria:
      - "USB device class: HID (0x03)"
      - "HID usage page: Braille Display (0x41)"
      - "HID report descriptor: Braille cells (32 cells × 6 dots = 192 bits)"
      - "Enumeration time: <2 seconds after USB plug-in"
      - "iOS VoiceOver: Automatic detection (no user config)"
      - "Android TalkBack: Automatic detection (no user config)"
    verification_method: "Test (iOS VoiceOver auto-detect, Android TalkBack auto-detect, USB analyzer)"
    derived_from: "PRD-IFACE-001-ASMP (USB-C architecture)"
    traces_to: "ARCH-B firmware, USB descriptor"

  PRD-IFACE-004-ASMP:
    parent: "PRD-IFACE-001-ASMP"
    title: "BLE HID Over GATT Protocol (Wireless)"
    pdf_says: "N/A (derived from BLE wireless architecture)"
    our_assumption: "BLE wireless device shall use HID Over GATT profile (standard Bluetooth HID, not Serial Port Profile)"
    rationale: |
      iOS/Android support BLE HID Over GATT natively:
      - iOS: HID Over GATT supported (iOS 7+)
      - Android: HID Over GATT supported (Android 4.4+)
      - Standard Bluetooth profile (no custom app required)
      - Pairing: Standard iOS/Android Bluetooth settings

      Alternative (Serial Port Profile SPP): Would require custom app (NOT preferred)
    requirement: "Device shall implement BLE HID Over GATT profile (not SPP)"
    risk_level: MEDIUM
    customer_validation_needed: YES
    impact_if_wrong: "SPP would require custom app development ($20K-30K, 2-3 months), App Store approval risk"
    test_plan: "v1.3.0 BLE firmware (HID Over GATT), Week 5-6 test pairing with iOS/Android"
    priority: "P0-Critical"
    category: "Interface"
    acceptance_criteria:
      - "BLE profile: HID Over GATT"
      - "Pairing: iOS/Android Bluetooth settings (no custom app)"
      - "Reconnection: Automatic after initial pairing"
      - "Latency: <100ms text-to-braille update"
      - "BLE security: Encrypted link (LE Secure Connections)"
    verification_method: "Test (iOS pairing, Android pairing, latency measurement with Bluetooth sniffer)"
    derived_from: "PRD-IFACE-001-ASMP (BLE architecture)"
    traces_to: "ARCH-A, ARCH-C firmware, BLE stack config"

  PRD-IFACE-005-ASMP:
    parent: "PRD-IFACE-003-ASMP"
    title: "iPhone USB-C Power Budget Assumption (CRITICAL RISK)"
    pdf_says: "N/A (derived from USB-C wired + iPhone compatibility assumption)"
    our_assumption: "iPhone 15+ USB-C port provides ≥500mA @ 5V for USB accessories (standard USB 2.0 bus-powered spec)"
    rationale: |
      CRITICAL ASSUMPTION - REQUIRES HARDWARE VALIDATION:
      - iPhone 15/16 have USB-C port (USB 2.0 data speed, NOT USB 3.0)
      - USB 2.0 spec: 500mA @ 5V = 2.5W for bus-powered devices
      - UNKNOWN: Does iPhone limit accessory power to save battery?
      - UNKNOWN: Does iPhone support USB OTG power output in all modes?
      - UNKNOWN: Does iPhone require MFi (Made for iPhone) certification for accessories?

      RISK: If iPhone provides <500mA or requires MFi, USB-C wired architecture may FAIL on iPhone.

      Android USB-C: Generally follows USB 2.0 spec (500mA OTG power), lower risk.
    requirement: "Device shall operate on ≥500mA @ 5V from iPhone 15+ USB-C port (USB 2.0 bus-powered mode)"
    risk_level: CRITICAL
    customer_validation_needed: YES
    impact_if_wrong: |
      If iPhone provides <500mA:
      - USB-C wired architecture FAILS on iPhone (only works on Android/PC)
      - Lose ~50% of mobile market (iOS users)
      - Mitigation options:
        1. Reduce power consumption <iPhone limit (may require different actuators, lower performance)
        2. Add external battery pack (defeats "wired simplicity" advantage)
        3. Eliminate iPhone USB-C support (BLE-only for iOS, USB-C for Android only)
    test_plan: "Week 5-6 prototype testing: Measure actual power draw on iPhone 15/16 USB-C port with USB power analyzer. Test USB enumeration and power negotiation."
    priority: "P0-Critical"
    category: "Interface"
    acceptance_criteria:
      - "Power draw: ≤500mA @ 5V average (USB 2.0 spec)"
      - "Peak power: <900mA for <1 second (USB spec allows brief transients)"
      - "iPhone 15/16: Device enumerates and operates normally"
      - "USB power analyzer: Confirms <500mA average during reading"
    verification_method: "Test (iPhone 15/16 hardware test, USB power analyzer measurement, 8-hour reading simulation)"
    derived_from: "PRD-IFACE-003-ASMP (USB-C HID), PRD-POWER-003-ASMP (USB power budget)"
    traces_to: "ARCH-B risk analysis, Week 5-6 testing plan"

  # --------------------------------------------------------------------------
  # COST
  # --------------------------------------------------------------------------

  PRD-COST-001:
    title: "Low Cost at Volume"
    source: "PDF p.2 - Objective"
    pdf_verbatim: "The device must be low-cost at volume production volume"
    status: "VAGUE - no dollar amount specified"
    why_vague: "No specific cost target (BOM? Retail? FOB?), no definition of 'low-cost' (relative to what?)"
    testable: NO
    priority: "P0-Critical"
    category: "Cost"

  PRD-COST-001-ASMP:
    parent: "PRD-COST-001"
    title: "BOM Cost Target with Volume Assumption"
    pdf_says: "low-cost at volume production volume"
    our_assumption: "BOM parts cost $200 ±$100 at volume of 10k units/month (range: $100-$300 BOM)"
    rationale: |
      PDF says 'low-cost' but gives no dollar amount. Market research (2025-10-08):
      - BrailleMe: $515.50 retail (20-cell) → assuming 3× markup → ~$170 BOM
      - Orbit Reader: $449 retail (20-cell) → assuming 3× markup → ~$150 BOM
      - APH Refreshabraille: $1,795 retail (18-cell) → premium product

      Our 32-cell device (60% more actuators than 20-cell) → target $200 BOM (mid-range).
      3× markup → $600 retail (competitive with BrailleMe $515).

      CRITICAL: This is an ASSUMPTION with ±50% sensitivity range ($100-$300 BOM).
      v1.4.0 will test multiple cost scenarios, v1.3.0 will design portfolio at different cost points.
    risk_level: CRITICAL
    customer_validation_needed: YES
    sensitivity_range: "$100-$300 BOM (±50% from $200 target)"
    volume_assumption: "10k units/month (120k/year) for BOM pricing"
    impact_if_wrong: |
      - If target is $100 BOM → Eliminates most actuator options, requires aggressive cost reduction
      - If target is $300 BOM → Opens up premium actuator options (solenoid, haptic feedback)
    test_plan: "v1.4.0 sensitivity analysis (BOM scenarios: $100, $150, $200, $250, $300), v1.3.0 portfolio of architectures at different cost points"
    priority: "P0-Critical"
    category: "Cost"
    acceptance_criteria:
      - "BOM target: $200 ±$100 (range: $100-$300) at 10k/month volume"
      - "Retail price: ~$600 (3× markup from $200 BOM)"
      - "Competitive positioning: Comparable to BrailleMe ($515) but 32-cell vs 20-cell"
      - "Cost breakdown: Actuators ~40-50% of BOM, PCB ~15%, battery ~10%, enclosure ~10%, misc ~15-25%"
    competitor_data: "BrailleMe ($515.50 retail, 20-cell), Orbit Reader ($449, 20-cell)"

  # --------------------------------------------------------------------------
  # VOLUME / MANUFACTURING
  # --------------------------------------------------------------------------

  PRD-VOL-001:
    title: "High Volume Production Design"
    source: "PDF p.2 - Objective"
    pdf_verbatim: "The device must be designed for high-volume production"
    status: "VAGUE - no volume quantity specified"
    why_vague: "No specific volume target (1k/mo? 10k/mo? 100k/mo?), no manufacturing process specified"
    testable: NO
    priority: "P1-High"
    category: "Manufacturing"

  PRD-VOL-001-ASMP:
    parent: "PRD-VOL-001"
    title: "High Volume Production Capability"
    pdf_says: "designed for high-volume production"
    our_assumption: "High-volume = 10k units/month (120k/year) production capability, SMT assembly, design for automation"
    rationale: |
      Global accessibility market: ~285M visually impaired, assuming 0.01% penetration = 28K units/year potential.
      Target 10k/month (120k/year) as 'high-volume' threshold that drives design decisions:
      - SMT assembly (not through-hole or hand assembly)
      - Standard PCB processes (no exotic fabrication)
      - Automated testing (test points, boundary scan)
      - Component availability (no obsolete or single-source parts)

      NOTE: Pilot production (PRD-SCHED-001-ASMP) is 100-500 units, then scale to 10k/month.
    risk_level: HIGH
    customer_validation_needed: YES
    sensitivity_range: "1k/month (low volume, hand assembly OK) to 100k/month (full automation required)"
    impact_if_wrong: "If 1k/month, hand assembly acceptable (lower NRE, higher unit cost). If 100k/month, requires full automation (higher NRE, lower unit cost)."
    test_plan: "v1.4.0 sensitivity analysis (volume scaling 1k vs 10k vs 100k), v1.5.0 DFM analysis for SMT assembly"
    priority: "P1-High"
    category: "Manufacturing"
    acceptance_criteria:
      - "Production volume: 10k units/month capability (120k/year)"
      - "Assembly: SMT (surface-mount technology), automated pick-and-place"
      - "Testing: Automated test fixtures (bed-of-nails, flying probe, or boundary scan)"
      - "Component sourcing: Standard parts, multi-source where possible, no obsolete parts"
      - "Yield target: ≥95% first-pass yield (pilot), ≥98% (mass production)"
    manufacturing_strategy: "Pilot (100-500 units, hand/semi-auto) → Scale (10k/month, full SMT automation)"

  # --------------------------------------------------------------------------
  # USER / ACCESSIBILITY
  # --------------------------------------------------------------------------

  PRD-USER-001:
    title: "Sight-Impaired User"
    source: "PDF p.2 - Objective"
    pdf_verbatim: "The device is intended for use by a sight-impaired person."
    status: "CLEAR - target user specified"
    testable: YES
    priority: "P0-Critical"
    category: "User"
    acceptance_criteria:
      - "Device meets accessibility standards (US ADA braille specs Section 703.3)"
      - "Tactile controls only (no screen dependency)"
      - "Audio feedback for status (optional but recommended)"
      - "User validation: ≥9/10 sight-impaired test users can operate device independently"

  # --------------------------------------------------------------------------
  # FUNCTIONAL REQUIREMENTS
  # --------------------------------------------------------------------------

  PRD-FUNC-001:
    title: "Single Line Braille Display - 32 Characters, 6 Dots Each"
    source: "PDF p.2 - Function"
    pdf_verbatim: "product displays a single line of Braille text at a time - drive 32 Braille characters. Each Braille character consists of 6 dots."
    status: "CLEAR - display specification explicit"
    testable: YES
    priority: "P0-Critical"
    category: "Function"
    acceptance_criteria:
      - "32 braille cells (characters) in single horizontal line"
      - "6 dots per cell (2 columns × 3 rows = Grade 1 braille)"
      - "Total: 192 individually controllable dots (32 × 6)"
      - "Dot spacing within cell: 2.3-2.5mm (horizontal), 2.5mm (vertical) per ADA 703.3"
      - "Cell center-to-center spacing: 6.1-7.6mm (horizontal) per ADA 703.3, use 6.2mm nominal"
      - "Display width: ~198mm (32 cells × 6.2mm center-to-center)"
      - "Dot diameter: 1.5-1.6mm (ADA 703.3: 0.059-0.063 inches)"
      - "Dot height: 0.6-0.9mm raised (ADA 703.3: 0.025-0.037 inches)"
      - "Actuator size constraint: ≤2.3mm diameter (derived from 2.3mm min dot spacing within cell)"
    standards_reference:
      - "US ADA Section 703.3 (Signs) - braille dimensions (authoritative source)"
      - "Braille Authority of North America (BANA) - spacing guidelines"
      - "ADA 703.3 spec: Cell spacing 0.241-0.300 inches (6.1-7.6mm), dot spacing 0.090-0.100 inches (2.3-2.5mm)"

  PRD-FUNC-002:
    title: "Braille Line Update (Refresh Next Line)"
    source: "PDF p.2 - Function"
    pdf_verbatim: "After a line of Braille text is read, the device must update to show the next line of text."
    status: "VAGUE - refresh speed and mechanism unspecified"
    why_vague: "No timing requirement (instant? 1 sec? 5 sec?), no trigger mechanism (button? automatic? gesture?)"
    testable: NO
    priority: "P1-High"
    category: "Function"

  PRD-FUNC-002-ASMP:
    parent: "PRD-FUNC-002"
    title: "Braille Refresh Speed and Navigation"
    pdf_says: "device must update to show the next line of text"
    our_assumption: "Refresh speed: <2 seconds full-line update (acceptable UX). Trigger: Tactile UP/DOWN buttons (standard pattern from BrailleMe, Orbit Reader competitors)."
    rationale: |
      Typical braille reading speed: 60-150 words/minute (advanced readers) = 1-2.5 seconds per line.
      Refresh <2 seconds = doesn't interrupt reading flow.

      Navigation: BrailleMe and Orbit Reader use tactile buttons (UP/DOWN or PREV/NEXT).
      Automatic scroll would be disruptive (users read at different speeds).
      Manual button trigger = user controls pace.
    risk_level: MEDIUM
    customer_validation_needed: YES
    sensitivity_range: "<1 sec (fast, challenging for some actuators) to <5 sec (slow but acceptable)"
    impact_if_wrong: "If <0.5 sec required, limits actuator options (piezo only). If 5 sec acceptable, eases actuator selection."
    test_plan: "v1.3.0 actuator selection (refresh speed capability), v1.4.0 UX testing with target users"
    priority: "P1-High"
    category: "Function"
    acceptance_criteria:
      - "Refresh speed: <2 seconds for full 32-character line update"
      - "Navigation: Two tactile buttons (UP = next line, DOWN = previous line)"
      - "Debouncing: No accidental double-presses (<50ms debounce)"
      - "Visual/audio feedback: Optional LED or beep on button press"
    competitor_reference: "BrailleMe (Perkins keyboard with nav keys), Orbit Reader (tactile buttons)"

  PRD-FUNC-003:
    title: "Braille Dot Actuation - Raised or Lowered"
    source: "PDF p.2 - Function"
    pdf_verbatim: "the device creates the braille dot pattern - Each dot can be either raised or lowered"
    status: "CLEAR - binary actuation specified"
    testable: YES
    priority: "P0-Critical"
    category: "Function"
    acceptance_criteria:
      - "Binary control: Each dot has two states (raised or lowered)"
      - "Dot height (raised): 0.5-0.7mm above surrounding surface (US ADA 703.3: 0.64-0.94mm)"
      - "Dot diameter: 1.5mm ±0.1mm (US ADA 703.3: 1.5-1.6mm)"
      - "Dot shape: Hemispherical dome (tactile sensitivity requirement)"
      - "Holding force: 50-100 grams (maintains raised position under finger pressure)"
      - "Reliability: >1 million actuation cycles (8 hrs/day × 2 years × 10 actuations/min)"
      - "Actuator size constraint: ≤2.3mm diameter (derived from 2.5mm pitch spacing)"
    standards_reference:
      - "US ADA Section 703.3"
      - "reference/standards/braille-dimensions-standards.md"

  # --------------------------------------------------------------------------
  # STANDARDS & COMPLIANCE
  # --------------------------------------------------------------------------

  NFR-STD-001:
    title: "North America Regulatory Compliance (UL + FCC)"
    source: "Derived from metadata.scope (standards awareness)"
    description: "Device shall be designed for compliance with North America standards (certification post-pilot)"
    priority: "P0-Critical"
    category: "Compliance"
    standards:
      - "UL 62368-1 (Electrical safety - ICT equipment)"
      - "UL 2054 (Battery safety - if BLE architecture)"
      - "FCC Part 15 Class B (EMI emissions)"
      - "FCC Part 15C (Radio emissions - if BLE)"
    rationale: "Phase 1 targets North America market. Design for compliance, certify post-pilot (Month 3-4). 2-month timeline constraint requires LOW-RISK design approach (pass preliminary testing on first attempt)."
    acceptance_criteria:
      - "Design complies with UL 62368-1 safety requirements"
      - "PCB layout follows FCC Part 15B best practices (4-layer with ground plane, EMI filtering)"
      - "Use pre-certified BLE modules (FCC ID) if BLE architecture"
      - "Use pre-certified battery packs (UL listed) if BLE architecture"
      - "Inductive kickback suppression on all solenoid/relay circuits (flyback diodes or zener clamps)"
      - "Power supply bulk capacitors (1000µF) and ceramic bypass (100nF) at each driver IC"
    verification_method: "Analysis (design review), Inspection (component selection), Test (preliminary emissions at pilot, full certification post-pilot)"
    cost_impact: "$26K (UL + FCC Class B + FCC Part 15C if BLE), 3-4 months (post-pilot)"

  NFR-STD-001-ASMP-TARGET:
    parent: "NFR-STD-001"
    title: "Target Market Assumption - USA (North America)"
    pdf_says: "N/A (standards awareness in scope)"
    our_assumption: "Target market: USA (North America) → UL + FCC compliance required. International markets (CE, PSE, CCC) deferred to post-pilot."
    rationale: |
      PDF does not specify target geography. USA is assumed based on:
      - US ADA Section 703.3 braille standards referenced (PRD-FUNC-001)
      - Lam Research headquarters: Fremont, CA (USA-based company)
      - North America is largest accessibility tech market (~40% global)
      - Single market focus reduces certification cost/complexity for pilot phase

      International expansion (CE/EU, PSE/Japan, CCC/China) deferred to Month 3+ after pilot validation.
    requirement: "Design for USA (North America) regulatory compliance first. International markets deferred to post-pilot."
    risk_level: MEDIUM
    customer_validation_needed: YES
    impact_if_wrong: "If EU/Asia required in pilot, add $15K-30K certification cost (CE + PSE + CCC) and 2-4 month timeline impact."
    test_plan: "v1.4.0 certification cost analysis (USA vs international), v1.5.0 timeline impact if multi-region required"
    priority: "P1-High"
    category: "Compliance"
    acceptance_criteria:
      - "UL 62368-1 (Electrical safety)"
      - "UL 2054 (Battery safety if Li-ion)"
      - "FCC Part 15 Class B (EMI emissions)"
      - "FCC Part 15C (Radio emissions if BLE)"
    verification_method: "Analysis (market research), Inspection (confirm customer target market)"
    derived_from: "NFR-STD-001 (North America compliance)"

  NFR-STD-001-DRV-PRELIM:
    parent: "NFR-STD-001"
    title: "Preliminary Standards Testing - Pilot Phase Gate"
    pdf_says: "N/A (derived from PRD-SCHED-001 2-month timeline + high-volume production requirement)"
    our_assumption: "Pilot units (100-500) must pass PRELIMINARY standards testing (pre-scan emissions, basic safety) before scaling to production. This validates low-risk design approach."
    rationale: |
      Timeline constraint: 2 months to pilot → Month 3-4 for full certification → Month 5+ for volume production.
      Risk mitigation: Pilot units must pass preliminary testing to avoid costly redesign delays.

      Preliminary testing (pilot phase):
      - EMI pre-scan (FCC Part 15B) using spectrum analyzer ($5K in-house test)
      - Safety inspection (UL checklist review, no formal certification yet)
      - Functional validation (braille spacing, actuation force, user testing)

      Full certification (post-pilot):
      - FCC Part 15 Class B (3rd-party test lab, $8K-12K)
      - UL 62368-1 (3rd-party NRTL, $15K-25K)
      - FCC Part 15C if BLE ($3K-5K additional)

      **CRITICAL:** If pilot fails preliminary testing, redesign required → 4-6 week delay → misses volume ramp timeline.
    requirement: "Pilot units must pass preliminary emissions pre-scan (<6 dB margin to FCC Part 15B limits) and safety checklist review before volume production authorization."
    risk_level: HIGH
    customer_validation_needed: YES
    impact_if_wrong: "Pilot fails preliminary testing → Redesign required (4-6 weeks) → Volume production delayed to Month 6-7 → Customer deadline missed."
    test_plan: "v1.3.0 low-risk design (4-layer PCB, ground plane, pre-certified modules), Week 7 pilot preliminary EMI pre-scan, Week 8 safety checklist review"
    priority: "P0-Critical"
    category: "Compliance"
    acceptance_criteria:
      - "EMI pre-scan: <6 dB margin to FCC Part 15 Class B limits (30-230 MHz conducted, 30 MHz-1 GHz radiated)"
      - "Safety checklist: 100% compliance with UL 62368-1 design guidelines (spacing, creepage, markings)"
      - "Inductive kickback: <50V transient spikes on power rails (measured with oscilloscope)"
      - "Power supply ripple: <100mV pk-pk on 5V rail during actuation (acceptable for digital logic)"
    verification_method: "Test (in-house EMI pre-scan with spectrum analyzer, oscilloscope power quality measurements), Inspection (UL checklist review)"
    derived_from: "PRD-SCHED-001 (2-month timeline), PRD-VOL-001 (high-volume production), NFR-STD-001 (compliance requirement)"
    traces_to: "Week 7-8 pilot testing plan, v1.5.0 path-to-production timeline"

  NFR-STD-001-DRV-LOWRISK:
    parent: "NFR-STD-001"
    title: "Low-Risk Design for Standards Compliance"
    pdf_says: "N/A (derived from PRD-SCHED-001 2-month timeline constraint)"
    our_assumption: "Timeline constraint (2 months to pilot, Month 3-4 for certification) requires LOW-RISK design approach: use proven techniques to pass standards on first attempt (no redesign cycles)."
    rationale: |
      2-month pilot timeline + Month 3-4 certification → NO TIME for redesign if standards testing fails.
      Low-risk design principles:

      1. **EMI Suppression (FCC Part 15B):**
         - 4-layer PCB with continuous ground plane (Layer 2)
         - Isolated power planes (Layer 3): 30V / 12V / 5V / 3.3V separation
         - Inductive kickback suppression: Flyback diodes or zener clamps on all solenoid circuits
         - Bulk capacitors (1000µF) + ceramic bypass (100nF) at each driver IC (24× ULN2803A)
         - Pre-certified BLE module (FCC ID) if wireless architecture

      2. **Safety (UL 62368-1):**
         - HV clearance: 50 mil (1.27mm) for 30V piezo drivers, 20 mil (0.51mm) for 12V solenoid drivers
         - Battery protection: UL-listed Li-ion packs with BMS (if ARCH_PIEZO_DLX)
         - Enclosure: Adequate ventilation, no sharp edges, flame-retardant material (UL94 V-0 or V-1)
         - Markings: UL, FCC, CE logos (placeholder for pilot, official after certification)

      3. **Architecture Selection Criteria:**
         - PREFER: Architectures with lower EMI risk (wired USB over BLE, solenoid 12V over piezo 30V)
         - PREFER: Pre-certified modules (BLE with FCC ID) over discrete RF design
         - AVOID: Custom switching regulators (use linear LDOs where feasible, lower EMI)
         - AVOID: High-frequency switching (piezo 30V boost @ 500 kHz → higher EMI risk)

      **TRADE-OFF:** Low-risk design may increase cost (4-layer PCB $15 vs 2-layer $8, pre-cert BLE $12 vs discrete $5),
      but ELIMINATES redesign risk ($50K+ cost, 4-6 week delay if standards fail).
    requirement: "All architectures shall use low-risk design techniques proven to pass FCC Part 15B and UL 62368-1 on first attempt."
    risk_level: CRITICAL
    customer_validation_needed: NO
    impact_if_wrong: "High-risk design (2-layer PCB, discrete RF, no EMI filtering) → 50% chance of standards failure → $50K+ redesign cost + 4-6 week delay → Customer deadline missed."
    test_plan: "v1.3.0 architecture designs incorporate low-risk techniques, v1.4.0 trade-off analysis quantifies cost delta (low-risk vs high-risk), Week 7-8 pilot preliminary testing validates approach"
    priority: "P0-Critical"
    category: "Compliance"
    acceptance_criteria:
      - "4-layer PCB with ground plane (all architectures)"
      - "Inductive kickback suppression (flyback diodes or zener clamps on all inductive loads)"
      - "Pre-certified BLE module with FCC ID (if wireless architecture)"
      - "UL-listed Li-ion battery pack with BMS (if rechargeable battery architecture)"
      - "Power supply filtering: 1000µF bulk + 100nF ceramic at each driver IC"
      - "HV clearance: ≥50 mil for 30V, ≥20 mil for 12V"
    verification_method: "Analysis (design review checklist), Inspection (PCB layout review, BOM component selection), Test (preliminary EMI pre-scan at pilot)"
    derived_from: "PRD-SCHED-001 (2-month timeline), NFR-STD-001 (compliance requirement), PRD-VOL-001 (high-volume production)"
    traces_to: "v1.3.0 architecture designs (PCB layer count, EMI filtering, module selection), v1.4.0 cost/risk trade-offs"

  NFR-EMI-001:
    title: "FCC Part 15 Class B Emissions - Low Risk Design"
    source: "Derived from NFR-STD-001-DRV-LOWRISK (low-risk compliance strategy)"
    description: "Device shall be designed with >6 dB margin to FCC Part 15 Class B emissions limits using proven EMI suppression techniques"
    priority: "P0-Critical"
    category: "EMI/EMC"
    standards:
      - "FCC Part 15 Class B (conducted emissions 150 kHz - 30 MHz)"
      - "FCC Part 15 Class B (radiated emissions 30 MHz - 1 GHz)"
    rationale: |
      FCC Part 15 Class B is the most stringent emissions standard (residential use).
      >6 dB margin ensures robustness to manufacturing variations, worst-case operating conditions, and test lab measurement uncertainty.

      **EMI RISK FACTORS:**
      - Inductive kickback from 192 solenoids (31.5V spikes without suppression)
      - Switching regulators (boost converters 5V→12V or 5V→30V at 500 kHz)
      - High dI/dt currents (192 solenoids @ 0.63A = 121A peak without multiplexing)
      - MCU clock harmonics (STM32F407 @ 168 MHz)
      - BLE radio (2.4 GHz if wireless architecture)

      **EMI SUPPRESSION TECHNIQUES (MANDATORY):**
      1. 4-layer PCB with continuous ground plane (Layer 2) → Return path for all high-frequency currents
      2. Isolated power planes (Layer 3) → Separate 30V / 12V / 5V / 3.3V to minimize coupling
      3. Inductive kickback suppression → Flyback diodes (ULN2803A internal) or zener clamps
      4. Bulk capacitors (1000µF) + ceramic bypass (100nF) at each driver IC → Filter switching transients
      5. Pre-certified BLE module (FCC ID) → Eliminates RF design risk
      6. Ferrite beads on power rails → Suppress high-frequency noise coupling
    requirement: "Design shall achieve >6 dB margin to FCC Part 15 Class B limits in preliminary testing (pilot phase)"
    risk_level: CRITICAL
    customer_validation_needed: NO
    impact_if_wrong: "Standards failure → $50K redesign cost (PCB respin, component changes) + 4-6 week delay → Volume production delayed to Month 6-7."
    test_plan: "Week 7 pilot preliminary EMI pre-scan (in-house spectrum analyzer), identify worst-case emissions, verify >6 dB margin. If <3 dB margin, add EMI fixes before full certification."
    priority: "P0-Critical"
    category: "EMI/EMC"
    acceptance_criteria:
      - "Conducted emissions (150 kHz - 30 MHz): <6 dB margin to FCC Part 15 Class B QP limits"
      - "Radiated emissions (30 MHz - 1 GHz): <6 dB margin to FCC Part 15 Class B QP limits"
      - "Inductive kickback transients: <50V pk on power rails (no damage to ICs)"
      - "Power supply ripple: <100mV pk-pk on 5V rail during worst-case actuation"
    verification_method: "Test (preliminary EMI pre-scan at pilot using spectrum analyzer, oscilloscope power quality measurements), Test (full FCC Part 15 Class B certification at 3rd-party lab post-pilot)"
    derived_from: "NFR-STD-001 (FCC compliance), NFR-STD-001-DRV-LOWRISK (low-risk design mandate)"
    traces_to: "PCB design (4-layer with ground plane), BOM (flyback diodes, bulk capacitors, ferrite beads), Week 7-8 preliminary testing"
    design_guidelines:
      - "PCB layout: 4-layer minimum (signal/GND/power/signal), 6-mil trace/space, ground pour on top/bottom"
      - "Solenoid drivers: Use ULN2803A internal flyback diodes (pin 10 to +5V), add 1000µF bulk cap per IC"
      - "Switching regulators: Add ferrite bead + 10µF output cap on boost converters"
      - "BLE module: Use pre-certified module (Raytac MDBT50Q with FCC ID 2AF8Q-MDBT50Q)"
      - "Enclosure: Plastic (no shielding needed for Class B residential use)"

  NFR-STD-002:
    title: "Accessibility Standards Compliance (US ADA)"
    source: "PDF p.2 - sight-impaired user requirement"
    description: "Braille display shall comply with US ADA Section 703.3 braille dimensions"
    priority: "P0-Critical"
    category: "Accessibility"
    standards:
      - "US ADA Section 703.3 (Braille signage standards)"
      - "Braille Authority of North America (BANA) guidelines"
    rationale: "ADA compliance ensures device is usable by sight-impaired population"
    acceptance_criteria:
      - "Dot spacing: 2.5mm pitch within cell, 6.0mm pitch between cells"
      - "Dot diameter: 1.5mm ±0.1mm (ADA: 1.5-1.6mm)"
      - "Dot height: 0.5-0.7mm raised (ADA: 0.64-0.94mm)"
      - "Actuator size: ≤2.3mm diameter (derived from spacing)"
    verification_method: "Inspection (mechanical measurements), Test (user validation with sight-impaired testers)"
    traces_to_existing: "PRD-FUNC-001, PRD-FUNC-003"

  # --------------------------------------------------------------------------
  # MECHANICAL DESIGN REQUIREMENTS (Derived from ADA 703.3)
  # --------------------------------------------------------------------------

  PRD-MECH-001:
    title: "Dot Diameter - ADA 703.3 Compliance"
    source: "Derived from US ADA Section 703.3 + reference/standards/braille-dimensions-standards.md"
    description: "Braille dot diameter shall be 1.5-1.6 mm per US ADA 703.3"
    priority: "P0-Critical"
    category: "Mechanical"
    requirement: "Dot diameter: 1.5 mm ±0.1 mm (target 1.5 mm nominal)"
    rationale: |
      US ADA 703.3 specifies dot diameter 0.059-0.063 inches (1.5-1.6 mm).
      Tactile sensitivity requirement - dots must be large enough for finger detection but small enough for 2.5mm pitch.
      Actuator tip diameter must match dot diameter for proper tactile feedback.
    acceptance_criteria:
      - "Dot diameter: 1.5 mm ±0.1 mm (measured with calipers)"
      - "Actuator tip: Hemispherical or domed geometry"
      - "Tolerance: ±0.1 mm (manufacturing capability)"
    verification_method: "Inspection (caliper measurement), Test (user tactile sensitivity validation)"
    standards_reference: "US ADA Section 703.3"
    traces_to: "Actuator selection, mechanical design, PRD-FUNC-001"
    derived_from: "NFR-STD-002 (ADA compliance)"

  PRD-MECH-002:
    title: "Dot Height (Raised Position) - ADA 703.3"
    source: "Derived from US ADA Section 703.3 + reference/standards/braille-dimensions-standards.md"
    description: "Braille dot height (raised position) shall be 0.64-0.94 mm per US ADA 703.3"
    priority: "P0-Critical"
    category: "Mechanical"
    requirement: "Dot height: 0.5-0.7 mm (target 0.6 mm nominal, within ADA 0.64-0.94 mm range)"
    rationale: |
      US ADA 703.3 specifies dot height 0.025-0.037 inches (0.64-0.94 mm).
      Target 0.5-0.7 mm provides margin for manufacturing tolerances while remaining within ADA spec.
      Higher dots (0.7 mm) = easier to read, but requires more actuator force/stroke.
      Lower dots (0.5 mm) = lower force, but may be harder to feel (still compliant at 0.64 mm ADA min).
      Actuator must provide ≥0.7 mm stroke to ensure 0.5-0.7 mm dot height after assembly tolerances.
    acceptance_criteria:
      - "Dot height (raised): 0.5-0.7 mm above surrounding surface"
      - "ADA compliance: Within 0.64-0.94 mm specification"
      - "Actuator stroke: ≥0.7 mm (provides margin for assembly tolerances)"
    verification_method: "Inspection (profilometer measurement), Test (user tactile sensitivity validation)"
    standards_reference: "US ADA Section 703.3"
    traces_to: "Actuator selection (stroke requirement), mechanical design, PRD-FUNC-003"
    derived_from: "NFR-STD-002 (ADA compliance)"

  PRD-MECH-003:
    title: "Dot Spacing Within Cell - ADA 703.3"
    source: "Derived from US ADA Section 703.3 + reference/standards/braille-dimensions-standards.md"
    description: "Dot spacing within braille cell shall be 2.3-2.5 mm per US ADA 703.3"
    priority: "P0-Critical"
    category: "Mechanical"
    requirement: "Dot pitch (within cell): 2.5 mm center-to-center (target, within ADA 2.3-2.5 mm range)"
    rationale: |
      US ADA 703.3 specifies dot spacing 0.090-0.100 inches (2.3-2.5 mm) within cell.
      2.5 mm pitch is standard North American spacing (0.1 inch).
      This spacing drives actuator size constraint: actuator diameter ≤ (2.5 mm pitch - margin) ≈ 2.3 mm max.

      Braille cell layout (2 columns × 3 rows):
      - Column spacing: 2.5 mm (dot 1 to dot 4)
      - Row spacing: 2.5 mm (dot 1 to dot 2 to dot 3)

      CRITICAL DESIGN DRIVER: Actuator diameter ≤2.3 mm to fit 2.5 mm pitch with clearance.
    acceptance_criteria:
      - "Dot pitch (within cell): 2.5 mm ±0.1 mm center-to-center"
      - "ADA compliance: Within 2.3-2.5 mm specification"
      - "Actuator diameter: ≤2.3 mm (enables 2.5 mm pitch with 0.2 mm clearance)"
    verification_method: "Inspection (CMM or caliper measurement), Test (user reading comprehension validation)"
    standards_reference: "US ADA Section 703.3"
    traces_to: "Actuator size constraint (≤2.3 mm), mechanical design, PRD-FUNC-001"
    derived_from: "NFR-STD-002 (ADA compliance)"
    design_impact: "This is THE critical constraint: actuator diameter ≤2.3 mm eliminates most COTS actuators"

  PRD-MECH-004:
    title: "Cell Spacing (Horizontal Between Characters) - ADA 703.3"
    source: "Derived from US ADA Section 703.3 + reference/standards/braille-dimensions-standards.md"
    description: "Horizontal spacing between adjacent braille cells shall be 6.1-7.6 mm per US ADA 703.3"
    priority: "P0-Critical"
    category: "Mechanical"
    requirement: "Cell pitch (horizontal): 6.0-6.2 mm center-to-center (target, within ADA 6.1-7.6 mm range)"
    rationale: |
      US ADA 703.3 specifies cell spacing 0.241-0.300 inches (6.1-7.6 mm) between corresponding dots in adjacent cells.
      6.0-6.2 mm pitch is typical for refreshable braille displays (balance between compactness and readability).

      DEVICE LENGTH CALCULATION:
      - 32 cells × 6.2 mm pitch = 198 mm display width (nominal design for 2.5mm dot pitch)
      - Plus margins: ~200-210 mm total device width
      - Architecture-specific variations (e.g., ARCH_SOL_ECO with 4mm actuators) documented in v1.3.0 architecture docs
    acceptance_criteria:
      - "Cell pitch: 6.0-6.2 mm ±0.2 mm center-to-center (nominal 2.5mm dot pitch architectures)"
      - "ADA compliance: Within 6.1-7.6 mm specification"
      - "Device length varies by architecture (see v1.3.0 architecture docs for ARCH_SOL_ECO trade-offs)"
    verification_method: "Inspection (CMM or caliper measurement), Test (user reading speed validation)"
    standards_reference: "US ADA Section 703.3"
    traces_to: "Device dimensions, mechanical layout, PRD-SIZE-001-ASMP"
    derived_from: "NFR-STD-002 (ADA compliance)"

  PRD-MECH-005:
    title: "Dot Shape - Hemispherical Dome"
    source: "Derived from US ADA Section 703.3 + reference/standards/braille-dimensions-standards.md"
    description: "Braille dot shape shall be domed/hemispherical for tactile sensitivity"
    priority: "P0-Critical"
    category: "Mechanical"
    requirement: "Dot shape: Hemispherical dome or rounded (NOT flat-topped)"
    rationale: |
      US ADA 703.3 and BANA guidelines specify "domed or rounded" dot shape.
      Tactile sensitivity requirement: smooth dome provides clear tactile feedback for finger scanning.
      Flat-topped dots are harder to detect and distinguish.

      Actuator tip geometry must be hemispherical or rounded to create proper dot shape.
      Machining/molding must maintain dome geometry (not sharp edges or flat spots).
    acceptance_criteria:
      - "Dot shape: Hemispherical or rounded dome"
      - "No flat spots: Dome radius ≥0.5 mm"
      - "Surface finish: Smooth (no sharp edges or burrs)"
    verification_method: "Inspection (visual + profilometer), Test (user tactile sensitivity validation)"
    standards_reference: "US ADA Section 703.3, BANA guidelines"
    traces_to: "Actuator tip design, mechanical design, PRD-FUNC-003"
    derived_from: "NFR-STD-002 (ADA compliance)"

  PRD-MECH-006:
    title: "Dot Holding Force - Tactile Feedback"
    source: "Derived from literature + reference/standards/braille-dimensions-standards.md (not ADA standard)"
    description: "Braille dot shall maintain raised position under 50-100 grams finger pressure"
    priority: "P1-High"
    category: "Mechanical"
    requirement: "Holding force: 50-100 grams (actuator must maintain raised position under finger pressure)"
    rationale: |
      NOT formally standardized by ADA, but literature suggests 50-100 grams force for tactile feedback.

      Actuator must:
      - Maintain raised position under finger scanning pressure (~50-100g typical)
      - Not collapse or depress when user touches dot
      - Provide consistent tactile feedback across all 192 dots

      Lower force (<50g): Dots may collapse under finger pressure (poor UX)
      Higher force (>100g): Harder to actuate (more power, larger actuator, higher cost)

      This drives actuator selection:
      - Piezo: High holding force (stiff material, no power required to hold)
      - Solenoid: Requires latch mechanism to hold without continuous power (see ARCH-C solenoid+latch design)
    acceptance_criteria:
      - "Holding force: 50-100 grams nominal"
      - "Dot does not collapse under finger pressure (<2 mm depression when 100g applied)"
      - "Consistent force across all 192 dots (±20% variation acceptable)"
    verification_method: "Test (force gauge measurement), Test (user tactile feedback validation)"
    standards_reference: "Literature (not formal ADA standard)"
    traces_to: "Actuator selection, mechanical design, PRD-FUNC-003"
    derived_from: "NFR-STD-002 (ADA compliance), literature on braille tactile feedback"
    risk_level: MEDIUM
    customer_validation_needed: YES
    impact_if_wrong: "If <50g, dots collapse under finger (poor UX). If >100g, harder to actuate (power/cost penalty)."

  # --------------------------------------------------------------------------
  # POWER / BATTERY LIFE REQUIREMENTS
  # --------------------------------------------------------------------------

  PRD-POWER-003-ASMP:
    title: "USB Power Budget (ARCH-B Wired)"
    parent: "PRD-IFACE-001-ASMP"
    pdf_says: "Scenario B: USB-C wired interface"
    our_assumption: "Device is USB 2.0 bus-powered, limited to 500mA @ 5V = 2.5W (USB specification)"
    rationale: |
      USB 2.0 specification limits bus-powered devices to 500mA (2.5W max).
      Need 20% margin (0.5W) for voltage drops, cable losses, and compatibility with older USB ports.
      Android phone USB OTG also limited to 500mA.
    requirement: "Average power consumption ≤ 2.0W (80% of USB 2.0 budget, 20% margin)"
    risk_level: MEDIUM
    customer_validation_needed: YES
    impact_if_wrong: "Device won't work on older USB ports or Android phones, may cause voltage brownout"
    test_plan: "v1.3.0 power budget analysis, v1.4.0 architecture trade-offs"
    priority: "P0-Critical"
    category: "Power"
    acceptance_criteria:
      - "Average power: ≤2.0W during typical reading (24 dots/sec actuation)"
      - "Peak power: ≤10W for <100ms (USB can handle brief transients)"
      - "Inrush current: <500mA on plug-in (no USB enumeration failure)"
    verification_method: "Analysis (power budget spreadsheet), Test (USB power analyzer during reading simulation)"
    derived_from: "USB 2.0 specification (500mA max bus-powered)"
    traces_to: "ARCH-B, actuator selection"

  PRD-POWER-004-ASMP:
    title: "AA Battery Life (ARCH-C Hybrid)"
    parent: "PRD-IFACE-001-ASMP"
    pdf_says: "Scenario C: Hybrid (BLE + USB), battery-powered option"
    our_assumption: "User wants 8 hours of continuous reading on 4× AA alkaline batteries (typical book reading session)"
    rationale: |
      4× AA alkaline: 2500 mAh @ 6V = 15 Wh total energy.
      Usable capacity: 80% (4 Wh lost to voltage sag at end-of-discharge) = 12 Wh usable.
      8-hour reading session: 12 Wh ÷ 8 hrs = 1.5W average power budget.
      Typical use case: Reading 1-2 books in a day (4-8 hours).
    requirement: "Average power consumption ≤ 1.5W for 8-hour battery life with 4× AA alkaline"
    risk_level: HIGH
    customer_validation_needed: YES
    impact_if_wrong: "Battery life too short (<4 hours), user frustration, need to carry spare batteries or use larger battery pack (8× AA)"
    test_plan: "v1.3.0 power budget analysis shows piezo (2.16W) EXCEEDS this budget by 46%. Need solenoid+latch alternative or larger battery."
    priority: "P1-High"
    category: "Power"
    acceptance_criteria:
      - "Average power: ≤1.5W during typical reading (24 dots/sec actuation, 50% active/25% page/25% idle)"
      - "Battery life: ≥8 hours continuous reading (4× AA alkaline, 2500 mAh)"
      - "Low-battery warning: Alert user at 20% capacity (1.6 hours remaining)"
    verification_method: "Analysis (power budget), Test (battery discharge test with continuous reading simulation)"
    derived_from: "AA battery capacity (2500 mAh @ 6V), typical reading session duration"
    traces_to: "ARCH-C, actuator selection (solenoid+latch required)"

  PRD-POWER-005-ASMP:
    title: "Li-ion Battery Life (ARCH-A Wireless)"
    parent: "PRD-IFACE-001-ASMP"
    pdf_says: "Scenario A: BLE-only wireless, rechargeable battery"
    our_assumption: "User wants 2 hours of reading on single charge (commute, short sessions between recharges)"
    rationale: |
      18650 Li-ion cell: 2500 mAh @ 3.7V = 9.25 Wh total energy.
      Usable capacity: 80% (safety margin, cutoff at 3.0V min) = 7.4 Wh usable.
      2-hour reading session: 7.4 Wh ÷ 2 hrs = 3.7W average power budget.
      Rechargeable expectation: User charges overnight, expects 2-4 hours per charge (commute, short sessions).
    requirement: "Average power consumption ≤ 3.7W for 2-hour battery life with 18650 Li-ion (2500 mAh @ 3.7V)"
    risk_level: LOW
    customer_validation_needed: YES
    impact_if_wrong: "Battery life <1 hour unacceptable, but risk LOW because piezo (2.16W) fits comfortably within 3.7W budget (58% utilization)"
    test_plan: "v1.3.0 power budget analysis shows piezo fits with 1.54W margin (42% headroom)"
    priority: "P1-High"
    category: "Power"
    acceptance_criteria:
      - "Average power: ≤3.7W during typical reading"
      - "Battery life: ≥2 hours continuous reading (18650 Li-ion 2500 mAh)"
      - "Charging time: ≤3 hours (USB-C input, 1.5A charge rate)"
      - "Battery gauge: Display SOC % to user"
    verification_method: "Analysis (power budget), Test (battery discharge test, charge cycle validation)"
    derived_from: "18650 Li-ion capacity (2500 mAh @ 3.7V), typical commute duration"
    traces_to: "ARCH-A, charging circuit design"

  # --------------------------------------------------------------------------
  # USAGE PROFILE / READING SPEED REQUIREMENTS
  # --------------------------------------------------------------------------

  PRD-FUNC-005-ASMP:
    title: "Reading Speed and Actuation Rate"
    parent: "PRD-FUNC-002-ASMP"
    pdf_says: "Refresh speed: rapid enough for smooth reading"
    our_assumption: "Average braille reader reads at 125 words/min (750 characters/min), requiring 38 dots/sec average actuation rate during continuous scrolling"
    rationale: |
      Literature on braille reading speed (skilled adult readers):
      - Average: 125 words/min
      - Range: 90-170 words/min (varies by experience)
      - Average English word: 5 characters + 1 space = 6 characters
      - 125 words/min × 6 chars/word = 750 chars/min = 12.5 chars/sec
      - Scrolling mode: 50% of dots change per scroll (partial overlap, 16 cells stay, 16 cells update)
      - 32 cells display, user reads in 2.5 seconds, scrolls next line
      - 192 dots × 50% overlap = 96 dots change every 2.5 sec = 38 dots/sec
    requirement: "System must support continuous scrolling at 125 words/min (38 dots/sec actuation rate) for minimum 4 hours"
    risk_level: LOW
    customer_validation_needed: YES
    impact_if_wrong: "If reading speed assumption wrong (e.g., 50 words/min slow reader), power consumption could be lower (benefit). If 200 words/min speed reader, may need higher actuation rate."
    test_plan: "v1.3.0 power budget uses 38 dots/sec for active reading, 6.4 dots/sec for page turns, 0 dots/sec for idle (weighted avg = 24 dots/sec)"
    priority: "P2-Medium"
    category: "Functional"
    acceptance_criteria:
      - "Reading speed: 125 words/min (750 chars/min) typical user"
      - "Scrolling rate: 1 line every 2.5 seconds (38 dots/sec actuation)"
      - "Page turn: Full 32-cell refresh every 25-30 seconds (6.4 dots/sec average)"
    verification_method: "Test (user study with braille readers, measure actual reading speed and scrolling behavior)"
    derived_from: "Braille reading speed literature, typical English word length"
    traces_to: "Power budget, actuator selection, firmware refresh algorithms"

  PRD-FUNC-006-ASMP:
    title: "Typical Usage Profile (Duty Cycle)"
    parent: "PRD-FUNC-005-ASMP"
    pdf_says: "N/A (engineering assumption for power budget)"
    our_assumption: "Typical 8-hour reading session: 50% active reading (scrolling), 25% page turns (pauses), 25% idle (breaks)"
    rationale: |
      Realistic reading behavior includes:
      - Active reading: Continuous scrolling, high actuation rate (38 dots/sec)
      - Page turns: User pauses to absorb content, then turns page (6.4 dots/sec)
      - Idle: User takes breaks, thinks, device remains on but static (0 dots/sec)

      Conservative estimate: 50% active / 25% page / 25% idle
      → Weighted average: (50% × 38) + (25% × 6.4) + (25% × 0) = 24 dots/sec average

      This reduces power consumption vs worst-case continuous scrolling (38 dots/sec).
    requirement: "Power budget calculated based on weighted average: 24 dots/sec (50% active @ 38 dots/sec, 25% page @ 6.4 dots/sec, 25% idle @ 0 dots/sec)"
    risk_level: LOW
    customer_validation_needed: YES
    impact_if_wrong: "If users scroll more continuously (75% active), power consumption increases 30%. If more idle time (50% idle), battery life improves significantly."
    test_plan: "v1.3.0 power budget uses 24 dots/sec weighted average. v1.4.0 sensitivity analysis on duty cycle (best/worst case)."
    priority: "P2-Medium"
    category: "Functional"
    acceptance_criteria:
      - "Active reading: 50% of time (continuous scrolling)"
      - "Page turns: 25% of time (full refresh every 25-30 sec)"
      - "Idle: 25% of time (display static, no actuation)"
      - "Weighted average: 24 dots/sec actuation rate for power budget"
    verification_method: "Test (user study, log actual usage patterns over 8-hour reading sessions)"
    derived_from: "Typical reading behavior (pauses for comprehension, breaks)"
    traces_to: "Power budget (PRD-POWER-003/004/005-ASMP), battery life estimates"

# ============================================================================
# PRIORITY DEFINITIONS
# ============================================================================
priorities:
  P0-Critical:
    desc: "Must have - product fails without this"
    risk: "Project failure if not met"
  P1-High:
    desc: "Should have - significant value/risk"
    risk: "Major degradation if not met"
  P2-Medium:
    desc: "Nice to have - enhances product"
    risk: "Minor impact if deferred"
  P3-Low:
    desc: "Future enhancement"
    risk: "No immediate impact"

# ============================================================================
# TRACEABILITY MATRIX (auto-populated by /req-trace command)
# ============================================================================
# Each requirement traces to:
#   - Source document (PDF page/section)
#   - Design documents (v1.3.0 architecture options)
#   - Analysis documents (v1.4.0 trade-offs, v1.5.0 production plan)
#   - Presentation slides (v2.0.0)
